# Cherry Studio 项目架构

## 1. 项目概述

Cherry Studio 是一个强大的 AI 辅助工具，提供跨平台支持，集成多种实用功能。

## 2. 技术栈

- **框架**: Electron + TypeScript
- **开发工具**: 
  - Cursor (IDE)
  - ESLint (代码规范)
  - Prettier (代码格式化)
- **构建工具**: electron-vite
- **包管理**: Yarn (Workspace)

## 3. 项目结构

### 3.1 核心功能模块

1. **知识库管理**
   - 文件处理系统
   - 多格式支持
     - 文本文件 (.txt, .md, .mdx)
     - Office 文档
     - PDF 文件
     - EPUB 电子书
     - 代码文件
     - Drafts 导出文件
   - WebDAV 集成
   - Mermaid 图表支持

2. **AI 功能**
   - 多模型支持
     - OpenAI
     - Azure
     - Anthropic
   - AI 驱动的翻译
   - 智能代理系统

3. **用户界面**
   - 明暗主题支持
   - 透明窗口
   - Markdown 渲染
   - 代码高亮
   - 拖拽排序

### 3.2 技术架构

1. **主进程 (Main Process)**
   - 文件系统管理
   - 数据库操作
   - IPC 通信
   - 系统API集成

2. **渲染进程 (Renderer Process)**
   - 用户界面渲染
   - 状态管理
   - 事件处理
   - 数据展示

3. **数据层**
   - SQLite 数据库
   - 本地文件存储
   - WebDAV 同步
   - 数据备份

### 3.3 文件结构

```
cherry-studio/
├── src/
│   ├── main/              # 主进程代码
│   │   ├── loader/       # 文件加载器
│   │   └── services/     # 主进程服务
│   └── renderer/         # 渲染进程代码
│       ├── src/          # 渲染进程源码
│       ├── hooks/        # React Hooks
│       └── components/   # React 组件
├── packages/
│   ├── database/        # 数据库模块
│   └── shared/          # 共享配置和工具
├── scripts/             # 构建和工具脚本
└── resources/          # 资源文件
```

## 4. 核心模块详解

### 4.1 文件加载系统

支持多种文件格式的加载和处理：
- 文本文件 (.txt, .md, .html 等)
- 代码文件 (.js, .ts, .py 等)
- 电子书 (.epub)
- Office 文档
- PDF 文件

### 4.2 知识库管理

- 文档分块处理
- 向量检索
- 内容索引
- 智能匹配

### 4.3 AI 集成

- 多模型支持
- API 密钥管理
- 智能代理系统
- 翻译功能

## 5. 构建与部署

### 5.1 开发环境

```bash:know/项目架构.md
# 安装依赖
yarn

# 开发模式
yarn dev
```

### 5.2 构建命令

- Windows: `yarn build:win`
- macOS: `yarn build:mac`
- Linux: `yarn build:linux`

### 5.3 平台支持

- Windows
- macOS (支持 Intel 和 ARM)
- Linux

## 6. 贡献指南

1. 代码贡献
   - Fork 仓库
   - 创建特性分支
   - 提交变更
   - 发起 Pull Request

2. 文档贡献
   - 改进用户手册
   - 完善开发文档
   - 编写教程

3. 社区参与
   - 问题反馈
   - 功能建议
   - 用户支持

## 7. 相关项目

- [one-api](https://github.com/songquanpeng/one-api): LLM API 管理系统